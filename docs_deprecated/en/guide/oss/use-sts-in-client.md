---
title: Accessing Cloud Storage using STS Tokens in Front-end
---



# {{ $frontmatter.title }}

To access cloud storage using the STS token information generated by [Using Cloud Functions to Generate Temporary Tokens (STS)](get-sts.md) in the frontend, you can directly upload files to cloud storage instead of uploading them to the cloud function first and then to cloud storage.

1. Install frontend dependencies:

```bash
npm i @aws-sdk/client-s3 laf-client-sdk
```

2. Write frontend code to implement file upload:

```typescript
import { S3, PutObjectCommand } from "@aws-sdk/client-s3";
import { Cloud } from "laf-client-sdk";

const APPID = "YOUR_APPID"; // Laf application appid

const cloud = new Cloud({
  baseUrl: `https://${appid}.laf.run`,
  getAccessToken: () => localStorage.getItem("access_token"),
});

// Get the temporary token for cloud storage
const { credentials, endpoint, region } = await cloud.invoke("get-sts");

const s3Client = new S3({
  endpoint: endpoint,
  region: region,
  credentials: {
    accessKeyId: credentials.AccessKeyId,
    secretAccessKey: credentials.SecretAccessKey,
    sessionToken: credentials.SessionToken,
    expiration: credentials.Expiration,
  },
  forcePathStyle: true,
});

// Bucket name prefixed with appid
const bucket = `${APPID}-public`;
const cmd = new PutObjectCommand({
  Bucket: bucket,
  Key: "index.html",
  Body: "Hello from laf oss!", // File content can be binary data, text data, or a File object
  ContentType: "text/html",
});

const res = await s3Client.send(cmd);
console.log(res);
```

::: tip
Here we use the `@aws-sdk/client-s3` library to implement file upload. The usage of other commands is the same as [Cloud Function Calling Cloud Storage](/guide/oss/oss-by-function).

You can use any SDK compatible with the AWS S3 interface as an alternative, such as the [MinIO JavaScript SDK](https://docs.min.io/docs/javascript-client-quickstart-guide.html).
:::